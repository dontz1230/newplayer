{"remainingRequest":"C:\\Users\\user\\Desktop\\1008\\newplayer\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\user\\Desktop\\1008\\newplayer\\src\\components\\Dashboard\\AddPosts.vue?vue&type=style&index=0&id=b4e2481a&scoped=true&lang=css&","dependencies":[{"path":"C:\\Users\\user\\Desktop\\1008\\newplayer\\src\\components\\Dashboard\\AddPosts.vue","mtime":1570504009401},{"path":"C:\\Users\\user\\Desktop\\1008\\newplayer\\node_modules\\css-loader\\index.js","mtime":499162500000},{"path":"C:\\Users\\user\\Desktop\\1008\\newplayer\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\user\\Desktop\\1008\\newplayer\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\user\\Desktop\\1008\\newplayer\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\user\\Desktop\\1008\\newplayer\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\n@import \"~vue-wysiwyg/dist/vueWysiwyg.css\";\r\n    .input_field.invalid input,\r\n    .input_field.invalid select {\r\n        border: 1px solid red;\r\n    }\r\n\r\n    button {\r\n        cursor: pointer;\r\n    }\r\n",{"version":3,"sources":["AddPosts.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiLA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"AddPosts.vue","sourceRoot":"src/components/Dashboard","sourcesContent":["<template>\r\n    <div class=\"dashboard_form\">\r\n        <h1>新增文章</h1>\r\n        <form @submit.prevent=\"postSubmit\">\r\n\r\n            <div v-if=\"imgUpload\">\r\n                <img :src=\"imgUpload\">\r\n            </div>\r\n\r\n            <div class=\"input_field\">\r\n                <input type=\"file\" \r\n                       @change=\"processFile($event)\"\r\n                       ref=\"myImgInput\"\r\n                >\r\n            </div>\r\n\r\n            <!-- 標題 -->\r\n            <div class=\"input_field\"\r\n                 :class=\"{ invalid : $v.formdata.title.$error }\">\r\n                <label>標題</label>\r\n                <input type=\"text\" \r\n                       v-model=\"formdata.title\"\r\n                       @blur=\"$v.formdata.title.$touch()\">\r\n                <p class=\"error_label\" v-if=\"$v.formdata.title.$error\">\r\n                標題為必填欄位\r\n                </p>\r\n            </div>\r\n\r\n            <!-- 簡述 -->\r\n            <div class=\"input_field\"\r\n                 :class=\"{ invalid : $v.formdata.desc.$error }\">\r\n                <label>簡述</label>\r\n                <input type=\"text\" placeholder=\"簡述請小於40字\"\r\n                       v-model=\"formdata.desc\"\r\n                       @blur=\"$v.formdata.desc.$touch()\">\r\n                <p class=\"error_label\" v-if=\"$v.formdata.desc.$error\">\r\n                簡述為必填欄位\r\n                </p>\r\n                <p class=\"error_label\" v-if=\"!$v.formdata.desc.maxLength\">\r\n                簡述請小於20字\r\n                </p>\r\n            </div>\r\n\r\n            <!-- wysiwyg -->\r\n            <div class=\"input_field\">\r\n                <wysiwyg v-model=\"formdata.content\"/>\r\n            </div>\r\n\r\n            <div class=\"input_field\"\r\n                 :class=\"{ invalid : $v.formdata.rating.$error}\">\r\n                <label>評分</label>\r\n                <select v-model=\"formdata.rating\"\r\n                        @blur=\"$v.formdata.rating.$touch()\">\r\n                    <option>1</option>\r\n                    <option>2</option>\r\n                    <option>3</option>\r\n                    <option>4</option>\r\n                    <option>5</option>\r\n                </select>\r\n                <p class=\"error_label\" v-if=\"$v.formdata.rating.$error\">\r\n                    一定要評分喔！\r\n                </p>\r\n            </div>\r\n\r\n            <button type=\"submit\">\r\n                發布貼文\r\n            </button>\r\n            \r\n        </form>\r\n\r\n        <md-dialog :md-active.sync=\"mddialog\">\r\n            <md-dialog-title>您尚未輸入文章內容，確定要發布文章嗎？</md-dialog-title>\r\n            <md-dialog-actions>\r\n        <md-button class=\"md-primary\" @click=\"dialogConfirm\">確認發布</md-button>\r\n        <md-button class=\"md-primary\" @click=\"dialogCancel\">取消發布</md-button>\r\n      </md-dialog-actions>\r\n        </md-dialog>\r\n\r\n        <div v-if=\"addpost\" class=\"post_succesfull\">\r\n            已發布文章\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { required, maxLength } from 'vuelidate/lib/validators'\r\nimport { log } from 'util'\r\n\r\nexport default {\r\n    data(){\r\n        return {\r\n            mddialog:false,\r\n            formdata:{\r\n                img:'',\r\n                title:'',\r\n                desc:'',\r\n                content:'',\r\n                rating:'',\r\n            }\r\n        }\r\n    },\r\n    validations:{\r\n        formdata:{\r\n            title:{\r\n                required\r\n            },\r\n            desc:{\r\n                required,\r\n                maxLength:maxLength(40)\r\n            },\r\n            rating:{\r\n                required\r\n            }\r\n        }\r\n    },\r\n    computed:{\r\n        addpost(){\r\n            let status = this.$store.getters['admin/addPostStatus'];\r\n            if(status){\r\n                this.clearPost();\r\n                this.$store.commit('admin/clearImgUpload')\r\n            }\r\n            return status\r\n        },\r\n        imgUpload(){\r\n            let imgUrl = this.$store.getters['admin/imgUploadUrl']\r\n            this.formdata.img = imgUrl\r\n            return imgUrl\r\n        }\r\n    },\r\n    destroyed(){\r\n        this.$store.commit('admin/clearImgUpload')\r\n    },\r\n    methods:{\r\n        postSubmit(){\r\n            if(!this.$v.$invalid){\r\n                if(this.formdata.content === ''){\r\n                    this.mddialog = true\r\n                } else {\r\n                    this.addPost()\r\n                }\r\n            } else {\r\n                alert('請檢查內容是否正確')\r\n            }\r\n        },\r\n        addPost(){\r\n            this.$store.dispatch('admin/addPost', this.formdata)\r\n        },\r\n        clearPost(){\r\n            //clear Vuelidate\r\n            this.$v.$reset()\r\n            //clear img\r\n            this.$refs.myImgInput.value = ''\r\n            //clear the form\r\n            this.formdata = {\r\n                title:'',\r\n                desc:'',\r\n                content:'',\r\n                rating:'',\r\n            }\r\n        },\r\n        dialogConfirm(){\r\n            this.mddialog = false;\r\n            this.addPost()\r\n        },\r\n        dialogCancel(){\r\n            this.mddialog = false\r\n        },\r\n        processFile(e){\r\n            let file = e.target.files[0];\r\n            this.$store.dispatch('admin/imgUpload', file)\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n@import \"~vue-wysiwyg/dist/vueWysiwyg.css\";\r\n    .input_field.invalid input,\r\n    .input_field.invalid select {\r\n        border: 1px solid red;\r\n    }\r\n\r\n    button {\r\n        cursor: pointer;\r\n    }\r\n</style>"]}]}