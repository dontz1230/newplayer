{"remainingRequest":"C:\\Users\\user\\Desktop\\player\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\user\\Desktop\\player\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\user\\Desktop\\player\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\user\\Desktop\\player\\src\\components\\Dashboard\\AddPosts.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\user\\Desktop\\player\\src\\components\\Dashboard\\AddPosts.vue","mtime":1570504009401},{"path":"C:\\Users\\user\\Desktop\\player\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\user\\Desktop\\player\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\user\\Desktop\\player\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\user\\Desktop\\player\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { required, maxLength } from 'vuelidate/lib/validators';\nimport { log } from 'util';\nexport default {\n  data: function data() {\n    return {\n      mddialog: false,\n      formdata: {\n        img: '',\n        title: '',\n        desc: '',\n        content: '',\n        rating: ''\n      }\n    };\n  },\n  validations: {\n    formdata: {\n      title: {\n        required: required\n      },\n      desc: {\n        required: required,\n        maxLength: maxLength(40)\n      },\n      rating: {\n        required: required\n      }\n    }\n  },\n  computed: {\n    addpost: function addpost() {\n      var status = this.$store.getters['admin/addPostStatus'];\n\n      if (status) {\n        this.clearPost();\n        this.$store.commit('admin/clearImgUpload');\n      }\n\n      return status;\n    },\n    imgUpload: function imgUpload() {\n      var imgUrl = this.$store.getters['admin/imgUploadUrl'];\n      this.formdata.img = imgUrl;\n      return imgUrl;\n    }\n  },\n  destroyed: function destroyed() {\n    this.$store.commit('admin/clearImgUpload');\n  },\n  methods: {\n    postSubmit: function postSubmit() {\n      if (!this.$v.$invalid) {\n        if (this.formdata.content === '') {\n          this.mddialog = true;\n        } else {\n          this.addPost();\n        }\n      } else {\n        alert('請檢查內容是否正確');\n      }\n    },\n    addPost: function addPost() {\n      this.$store.dispatch('admin/addPost', this.formdata);\n    },\n    clearPost: function clearPost() {\n      //clear Vuelidate\n      this.$v.$reset(); //clear img\n\n      this.$refs.myImgInput.value = ''; //clear the form\n\n      this.formdata = {\n        title: '',\n        desc: '',\n        content: '',\n        rating: ''\n      };\n    },\n    dialogConfirm: function dialogConfirm() {\n      this.mddialog = false;\n      this.addPost();\n    },\n    dialogCancel: function dialogCancel() {\n      this.mddialog = false;\n    },\n    processFile: function processFile(e) {\n      var file = e.target.files[0];\n      this.$store.dispatch('admin/imgUpload', file);\n    }\n  }\n};",{"version":3,"sources":["AddPosts.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqFA,SAAA,QAAA,EAAA,SAAA,QAAA,0BAAA;AACA,SAAA,GAAA,QAAA,MAAA;AAEA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA,MAAA,QAAA,EAAA,KADA;AAEA,MAAA,QAAA,EAAA;AACA,QAAA,GAAA,EAAA,EADA;AAEA,QAAA,KAAA,EAAA,EAFA;AAGA,QAAA,IAAA,EAAA,EAHA;AAIA,QAAA,OAAA,EAAA,EAJA;AAKA,QAAA,MAAA,EAAA;AALA;AAFA,KAAA;AAUA,GAZA;AAaA,EAAA,WAAA,EAAA;AACA,IAAA,QAAA,EAAA;AACA,MAAA,KAAA,EAAA;AACA,QAAA,QAAA,EAAA;AADA,OADA;AAIA,MAAA,IAAA,EAAA;AACA,QAAA,QAAA,EAAA,QADA;AAEA,QAAA,SAAA,EAAA,SAAA,CAAA,EAAA;AAFA,OAJA;AAQA,MAAA,MAAA,EAAA;AACA,QAAA,QAAA,EAAA;AADA;AARA;AADA,GAbA;AA2BA,EAAA,QAAA,EAAA;AACA,IAAA,OADA,qBACA;AACA,UAAA,MAAA,GAAA,KAAA,MAAA,CAAA,OAAA,CAAA,qBAAA,CAAA;;AACA,UAAA,MAAA,EAAA;AACA,aAAA,SAAA;AACA,aAAA,MAAA,CAAA,MAAA,CAAA,sBAAA;AACA;;AACA,aAAA,MAAA;AACA,KARA;AASA,IAAA,SATA,uBASA;AACA,UAAA,MAAA,GAAA,KAAA,MAAA,CAAA,OAAA,CAAA,oBAAA,CAAA;AACA,WAAA,QAAA,CAAA,GAAA,GAAA,MAAA;AACA,aAAA,MAAA;AACA;AAbA,GA3BA;AA0CA,EAAA,SA1CA,uBA0CA;AACA,SAAA,MAAA,CAAA,MAAA,CAAA,sBAAA;AACA,GA5CA;AA6CA,EAAA,OAAA,EAAA;AACA,IAAA,UADA,wBACA;AACA,UAAA,CAAA,KAAA,EAAA,CAAA,QAAA,EAAA;AACA,YAAA,KAAA,QAAA,CAAA,OAAA,KAAA,EAAA,EAAA;AACA,eAAA,QAAA,GAAA,IAAA;AACA,SAFA,MAEA;AACA,eAAA,OAAA;AACA;AACA,OANA,MAMA;AACA,QAAA,KAAA,CAAA,WAAA,CAAA;AACA;AACA,KAXA;AAYA,IAAA,OAZA,qBAYA;AACA,WAAA,MAAA,CAAA,QAAA,CAAA,eAAA,EAAA,KAAA,QAAA;AACA,KAdA;AAeA,IAAA,SAfA,uBAeA;AACA;AACA,WAAA,EAAA,CAAA,MAAA,GAFA,CAGA;;AACA,WAAA,KAAA,CAAA,UAAA,CAAA,KAAA,GAAA,EAAA,CAJA,CAKA;;AACA,WAAA,QAAA,GAAA;AACA,QAAA,KAAA,EAAA,EADA;AAEA,QAAA,IAAA,EAAA,EAFA;AAGA,QAAA,OAAA,EAAA,EAHA;AAIA,QAAA,MAAA,EAAA;AAJA,OAAA;AAMA,KA3BA;AA4BA,IAAA,aA5BA,2BA4BA;AACA,WAAA,QAAA,GAAA,KAAA;AACA,WAAA,OAAA;AACA,KA/BA;AAgCA,IAAA,YAhCA,0BAgCA;AACA,WAAA,QAAA,GAAA,KAAA;AACA,KAlCA;AAmCA,IAAA,WAnCA,uBAmCA,CAnCA,EAmCA;AACA,UAAA,IAAA,GAAA,CAAA,CAAA,MAAA,CAAA,KAAA,CAAA,CAAA,CAAA;AACA,WAAA,MAAA,CAAA,QAAA,CAAA,iBAAA,EAAA,IAAA;AACA;AAtCA;AA7CA,CAAA","sourcesContent":["<template>\r\n    <div class=\"dashboard_form\">\r\n        <h1>新增文章</h1>\r\n        <form @submit.prevent=\"postSubmit\">\r\n\r\n            <div v-if=\"imgUpload\">\r\n                <img :src=\"imgUpload\">\r\n            </div>\r\n\r\n            <div class=\"input_field\">\r\n                <input type=\"file\" \r\n                       @change=\"processFile($event)\"\r\n                       ref=\"myImgInput\"\r\n                >\r\n            </div>\r\n\r\n            <!-- 標題 -->\r\n            <div class=\"input_field\"\r\n                 :class=\"{ invalid : $v.formdata.title.$error }\">\r\n                <label>標題</label>\r\n                <input type=\"text\" \r\n                       v-model=\"formdata.title\"\r\n                       @blur=\"$v.formdata.title.$touch()\">\r\n                <p class=\"error_label\" v-if=\"$v.formdata.title.$error\">\r\n                標題為必填欄位\r\n                </p>\r\n            </div>\r\n\r\n            <!-- 簡述 -->\r\n            <div class=\"input_field\"\r\n                 :class=\"{ invalid : $v.formdata.desc.$error }\">\r\n                <label>簡述</label>\r\n                <input type=\"text\" placeholder=\"簡述請小於40字\"\r\n                       v-model=\"formdata.desc\"\r\n                       @blur=\"$v.formdata.desc.$touch()\">\r\n                <p class=\"error_label\" v-if=\"$v.formdata.desc.$error\">\r\n                簡述為必填欄位\r\n                </p>\r\n                <p class=\"error_label\" v-if=\"!$v.formdata.desc.maxLength\">\r\n                簡述請小於20字\r\n                </p>\r\n            </div>\r\n\r\n            <!-- wysiwyg -->\r\n            <div class=\"input_field\">\r\n                <wysiwyg v-model=\"formdata.content\"/>\r\n            </div>\r\n\r\n            <div class=\"input_field\"\r\n                 :class=\"{ invalid : $v.formdata.rating.$error}\">\r\n                <label>評分</label>\r\n                <select v-model=\"formdata.rating\"\r\n                        @blur=\"$v.formdata.rating.$touch()\">\r\n                    <option>1</option>\r\n                    <option>2</option>\r\n                    <option>3</option>\r\n                    <option>4</option>\r\n                    <option>5</option>\r\n                </select>\r\n                <p class=\"error_label\" v-if=\"$v.formdata.rating.$error\">\r\n                    一定要評分喔！\r\n                </p>\r\n            </div>\r\n\r\n            <button type=\"submit\">\r\n                發布貼文\r\n            </button>\r\n            \r\n        </form>\r\n\r\n        <md-dialog :md-active.sync=\"mddialog\">\r\n            <md-dialog-title>您尚未輸入文章內容，確定要發布文章嗎？</md-dialog-title>\r\n            <md-dialog-actions>\r\n        <md-button class=\"md-primary\" @click=\"dialogConfirm\">確認發布</md-button>\r\n        <md-button class=\"md-primary\" @click=\"dialogCancel\">取消發布</md-button>\r\n      </md-dialog-actions>\r\n        </md-dialog>\r\n\r\n        <div v-if=\"addpost\" class=\"post_succesfull\">\r\n            已發布文章\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { required, maxLength } from 'vuelidate/lib/validators'\r\nimport { log } from 'util'\r\n\r\nexport default {\r\n    data(){\r\n        return {\r\n            mddialog:false,\r\n            formdata:{\r\n                img:'',\r\n                title:'',\r\n                desc:'',\r\n                content:'',\r\n                rating:'',\r\n            }\r\n        }\r\n    },\r\n    validations:{\r\n        formdata:{\r\n            title:{\r\n                required\r\n            },\r\n            desc:{\r\n                required,\r\n                maxLength:maxLength(40)\r\n            },\r\n            rating:{\r\n                required\r\n            }\r\n        }\r\n    },\r\n    computed:{\r\n        addpost(){\r\n            let status = this.$store.getters['admin/addPostStatus'];\r\n            if(status){\r\n                this.clearPost();\r\n                this.$store.commit('admin/clearImgUpload')\r\n            }\r\n            return status\r\n        },\r\n        imgUpload(){\r\n            let imgUrl = this.$store.getters['admin/imgUploadUrl']\r\n            this.formdata.img = imgUrl\r\n            return imgUrl\r\n        }\r\n    },\r\n    destroyed(){\r\n        this.$store.commit('admin/clearImgUpload')\r\n    },\r\n    methods:{\r\n        postSubmit(){\r\n            if(!this.$v.$invalid){\r\n                if(this.formdata.content === ''){\r\n                    this.mddialog = true\r\n                } else {\r\n                    this.addPost()\r\n                }\r\n            } else {\r\n                alert('請檢查內容是否正確')\r\n            }\r\n        },\r\n        addPost(){\r\n            this.$store.dispatch('admin/addPost', this.formdata)\r\n        },\r\n        clearPost(){\r\n            //clear Vuelidate\r\n            this.$v.$reset()\r\n            //clear img\r\n            this.$refs.myImgInput.value = ''\r\n            //clear the form\r\n            this.formdata = {\r\n                title:'',\r\n                desc:'',\r\n                content:'',\r\n                rating:'',\r\n            }\r\n        },\r\n        dialogConfirm(){\r\n            this.mddialog = false;\r\n            this.addPost()\r\n        },\r\n        dialogCancel(){\r\n            this.mddialog = false\r\n        },\r\n        processFile(e){\r\n            let file = e.target.files[0];\r\n            this.$store.dispatch('admin/imgUpload', file)\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n@import \"~vue-wysiwyg/dist/vueWysiwyg.css\";\r\n    .input_field.invalid input,\r\n    .input_field.invalid select {\r\n        border: 1px solid red;\r\n    }\r\n\r\n    button {\r\n        cursor: pointer;\r\n    }\r\n</style>"],"sourceRoot":"src/components/Dashboard"}]}